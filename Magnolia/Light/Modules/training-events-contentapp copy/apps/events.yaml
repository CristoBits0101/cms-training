#!content-type:event              #
name: events # Nombre interno de la app
label: Eventos # Nombre de la app
enabled: false # Activar o desactivar la app
icon: icon-web-resources-app # Icono de la app
permissions:
  roles:
    superuser: superuser # Viene pordefecto.
    editors: travel-demo-editor # Ejemplo de rol adicional agregado utilizado para el usuario 'eric/eric'.

subApps:
  browser: # Alguna configuración de subaplicaciones del 'navegador'.
    actionbar:
      defaultAction: nonExistingAction ## Workaround needed to enable column's edition until MGNLUI-6259 is resolved.
    workbench:
      contentViews:
        tree:
          columns: &columnsConfiguration
            name:
              expandRatio: 0.5
              nodeTypeToIcon:
                event: icon-datepicker
              editable: true
              editor:
                availability:
                  nodeTypes:
                    - event
                    - mgnl:folder
                field:
                  $type: textField
            location:
              expandRatio: 0.5
              filterComponent:
                $type: textField
              editable: true
              editor:
                availability:
                  nodeTypes:
                    - event
                field:
                  $type: textField
                  rows: 3
            date:
              $type: dateColumn
              expandRatio: 0.5
              editable: true
              editor:
                availability:
                  nodeTypes:
                    - event
                field:
                  $type: dateField
                  time: true
                  timeFormat: HH:mm
                  type: java.util.Date
            eventType:
              expandRatio: 0.5
              filterComponent:
                $type: textField
        list:
          columns:
            <<: *columnsConfiguration
            path:
              expandRatio: 0.5
  detail: #
    form: # Formulario.
      properties: # Columnas.
        location: # Columna.
          rows: 3 # label propiedad.
        date: # Columna.
          time: true # label restricción.
          timeFormat: HH:mm # label formato.
      layout: # Separa los datos de contacto y dirección en pestañas.
        $type: tabbedLayout # Diseño tabulado.
        tabs: # Pestañas.
          eventData: # Pestaña 1.
            fields: # Campos.
              - name: name # Campo.
              - name: location # Campo.
              - name: description # Campo.
              - name: date # Campo.
              - name: eventType # Campo.
              - name: imageLink # Campo.
          eventContacts: # Pestaña 2.
            fields: # Campos.
              - name: contacts # Campo.
          eventAddresses: # Pestaña 3.
            fields: # Campos.
              - name: addresses # Campo.
datasource: # Opcional ya que se crea automáticamente a partir del tipo de contenido.
  $type: jcrDatasource # Tipo de datos.
  workspace: events # Workspaces con el que trabaja.
  includeProperties: false # Sin coger las propiedades del JCR datasource.
  # previewDefinition:            # Podría usarse si un binario se almacenó directamente en el nodo sin usar referencias de activos.
  # nodeName: image             # Referencia al nodo de una imagen.
  allowedNodeTypes: # Tipo de nodos permitidos.
    - event # Nodos de tipo event.
    - mgnl:folder # Nodos con la propiedad mgnl:folder.
  describeByProperty: name # Mostrará el nombre de un evento en lugar de su ruta JCR al vincularlo, p. 'Evento uno' en lugar de /Evento-uno
